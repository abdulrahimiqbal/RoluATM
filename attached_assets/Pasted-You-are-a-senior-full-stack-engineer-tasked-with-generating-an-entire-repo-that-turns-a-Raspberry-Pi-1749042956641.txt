You are a senior fullâ€‘stack engineer tasked with generating an entire repo that turns
a Raspberryâ€¯Piâ€¯4â€¯B and a Telequipâ€¯Tâ€‘Flex coin dispenser into a cryptoâ€‘toâ€‘cash kiosk.
Create every file and directory, ready to run on both desktop (dev) and RaspberryÂ Pi
(production).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“  Desired project layout
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
/
 â”œâ”€ frontend/                 # React 18 + Vite + TypeScript
 â”‚   â”œâ”€ src/
 â”‚   â”‚   â”œâ”€ App.tsx
 â”‚   â”‚   â”œâ”€ hooks/useWorldId.ts
 â”‚   â”‚   â””â”€ components/Qr.tsx
 â”‚   â”œâ”€ vite.config.ts
 â”‚   â””â”€ index.html
 â”œâ”€ src/
 â”‚   â”œâ”€ backend/
 â”‚   â”‚   â”œâ”€ app.py           # Flask entryâ€‘point
 â”‚   â”‚   â”œâ”€ driver_tflex.py  # Telequip serial driver
 â”‚   â”‚   â””â”€ settings.py
 â”‚   â””â”€ install_pi.sh        # oneâ€‘shot deployment script
 â”œâ”€ tests/
 â”‚   â””â”€ mock_tflex.py
 â”œâ”€ requirements.txt
 â”œâ”€ package.json
 â”œâ”€ README.md
 â”œâ”€ .gitignore
 â””â”€ docker-compose.dev.yml   # optional dev container

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸŒ  Frontâ€‘end (frontend/)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ ReactÂ 18  +  Vite  +  TypeScript
â€¢ `@worldcoin/minikitâ€‘react` for Worldâ€¯ID verify flow
â€¢ `qrcode.react` (pure React QR)
â€¢ Tailwind for tiny styling (optional)

Behaviour:
1. Fetch `/api/balance` â†’ show token balance in fiat (USD).
2. â€œWithdraw $Xâ€ button opens MiniKit `verify()` with:
     actionId = `atm-demo-${Date.now()}`
     signal    = 'withdraw'
     devMode   = true
3. On proof callback POST to `/api/withdraw` with JSON:
     { proof, nullifierHash, merkleRoot, amountUsd }
4. Display spinner; on 200 OK show â€œTake your cash!â€ banner.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ  Backâ€‘end (src/backend/)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ PythonÂ 3.11
â€¢ Flask + CORS
â€¢ `pyserial` for USB CDC device `/dev/ttyACM0`
â€¢ `requests` for:
     * Worldâ€¯ID verifier API      (envÂ WORLD_API_URL)
     * Wallet lock/settle API     (envÂ WALLET_API_URL)
     * Kraken price ticker        (envÂ FX_URL, default Kraken)

Key routes:
GET  /api/balance?address=:addr
POST /api/withdraw   â€” body {proof, nullifierHash, merkleRoot, amountUsd}

Serial driver:
class TFlex(port:str='/dev/ttyACM0'):
    def dispense(self, coins:int) -> None
    def status(self) -> dict  # low_coin, lid_open, fault

On withdraw:
1. Verify Worldâ€¯ID proof (HTTP). 400 if invalid.
2. Lock user tokens via wallet.
3. Convert USD â†’ quarters (25Â¢) ; upâ€‘round to nearest coin.
4. tflex.dispense(n); if RuntimeError:
       wallet.unlock(); return 500.
5. wallet.settle(); return 200.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âš™ï¸  install_pi.sh
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Enables `sudo apt install python3-venv nginx`
â€¢ Symlinks nginx conf serving frontend/dist behind TLS (selfâ€‘signed).
â€¢ Adds systemd units:
    worldcash.service  (gunicorn backend)
    kiosk-chromium.service
â€¢ Adds `gpu_mem=128` and `dtoverlay=vc4-kms-v3d` to /boot/firmware/config.txt
â€¢ Adds pi to dialout group.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§ª  tests/mock_tflex.py
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Minimal asyncio TCP or serialâ€‘url simulator that echoes coin bytes,
emits lowâ€‘coin after N coins, and simulates jam on command.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸŒ  Environment variables (.env example)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TFLEX_PORT=/dev/ttyACM0
WORLD_API_URL=https://id.worldcoin.org/api/v1/verify
WALLET_API_URL=https://wallet.example.com
FX_URL=https://api.kraken.com/0/public/Ticker?pair=WBTCUSD
FIAT_DENOM=USD
DEV_MODE=true

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
README.md contents
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Overview diagram (mermaid sequence)
â€¢ Billâ€‘ofâ€‘materials list (Pi kit, USBâ€‘B cable, Tâ€‘Flex, keyÂ 340â€‘314S)
â€¢ Dev quickâ€‘start
â€¢ Pi deploy instructions
â€¢ Troubleshooting table
â€¢ Roadmap

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Constraints & niceties
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ No databaseâ€”store nothing persistent on Pi.
â€¢ Use `python-dotenv` to load envÂ vars locally.
â€¢ CORS allowÂ origin `*` for dev; env toggle for prod.
â€¢ `npm run build` puts static files in `frontend/dist`; backend serves them.
â€¢ Provide complete type annotations in driver_tflex.py.
â€¢ Makefile with targets: dev, build, lintâ€‘py, lintâ€‘js.

Generate every file with correct paths, full content, including
package.json, requirements.txt, vite config, Tailwind config,
systemd unit files, and install_pi.sh.

Return **only** the file list followed by the file contents.
No explanatory prose, just the repo scaffold.
